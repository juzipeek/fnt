<!doctype html>

<style>
#container { text-align: center; }
#preview   { font-size: 60pt; font-family: sans; }
#code      { font-family: courier; }
.row       { line-height: 0px; }
.num       { line-height: 10px; display: inline-block; width: 20px; position: relative; left: -20px; }
.box       { min-width: 20px; min-height: 20px; display: inline-block; border: 1px solid #bbb; margin: -1px; }
.set       { background-color: black; }
.unset     { background-color: white; }
</style>

<h1>Font Editor</h1>

<div style="position: absolute; padding: 20px; width: 400px;">
  <select id="page" style="width: 100%">
    <option value="0">U+0000 ... U+007F: Basic Latin</option>
    <option value="128">U+0080 ... U+00FF: Latin-1 Supplement</option>
    <option value="256">U+0100 ... U+017F: Latin Extended-A</option>
    <option value="384">U+0180 ... U+024F: Latin Extended-B</option>
    <option value="592">U+0250 ... U+02AF: IPA Extensions</option>
    <option value="688">U+02B0 ... U+02FF: Spacing Modifier Letters</option>
    <option value="768">U+0300 ... U+036F: Combining Diacritical Marks</option>
    <option value="880">U+0370 ... U+03FF: Greek and Coptic</option>
    <option value="1024">U+0400 ... U+04FF: Cyrillic</option>
    <option value="1280">U+0500 ... U+052F: Cyrillic Supplement</option>
    <option value="1328">U+0530 ... U+058F: Armenian</option>
    <option value="1424">U+0590 ... U+05FF: Hebrew</option>
    <option value="1536">U+0600 ... U+06FF: Arabic</option>
    <option value="1792">U+0700 ... U+074F: Syriac</option>
    <option value="1872">U+0750 ... U+077F: Arabic Supplement</option>
    <option value="1920">U+0780 ... U+07BF: Thaana</option>
    <option value="1984">U+07C0 ... U+07FF: NKo</option>
    <option value="2048">U+0800 ... U+083F: Samaritan</option>
    <option value="2112">U+0840 ... U+085F: Mandaic</option>
    <option value="2208">U+08A0 ... U+08FF: Arabic Extended-A</option>
    <option value="2304">U+0900 ... U+097F: Devanagari</option>
    <option value="2432">U+0980 ... U+09FF: Bengali</option>
    <option value="2560">U+0A00 ... U+0A7F: Gurmukhi</option>
    <option value="2688">U+0A80 ... U+0AFF: Gujarati</option>
    <option value="2816">U+0B00 ... U+0B7F: Oriya</option>
    <option value="2944">U+0B80 ... U+0BFF: Tamil</option>
    <option value="3072">U+0C00 ... U+0C7F: Telugu</option>
    <option value="3200">U+0C80 ... U+0CFF: Kannada</option>
    <option value="3328">U+0D00 ... U+0D7F: Malayalam</option>
    <option value="3456">U+0D80 ... U+0DFF: Sinhala</option>
    <option value="3584">U+0E00 ... U+0E7F: Thai</option>
    <option value="3712">U+0E80 ... U+0EFF: Lao</option>
    <option value="3840">U+0F00 ... U+0FFF: Tibetan</option>
    <option value="4096">U+1000 ... U+109F: Myanmar</option>
    <option value="4256">U+10A0 ... U+10FF: Georgian</option>
    <option value="4352">U+1100 ... U+11FF: Hangul Jamo</option>
    <option value="4608">U+1200 ... U+137F: Ethiopic</option>
    <option value="4992">U+1380 ... U+139F: Ethiopic Supplement</option>
    <option value="5024">U+13A0 ... U+13FF: Cherokee</option>
    <option value="5120">U+1400 ... U+167F: Unified Canadian Aboriginal Syllabics</option>
    <option value="5760">U+1680 ... U+169F: Ogham</option>
    <option value="5792">U+16A0 ... U+16FF: Runic</option>
    <option value="5888">U+1700 ... U+171F: Tagalog</option>
    <option value="5920">U+1720 ... U+173F: Hanunoo</option>
    <option value="5952">U+1740 ... U+175F: Buhid</option>
    <option value="5984">U+1760 ... U+177F: Tagbanwa</option>
    <option value="6016">U+1780 ... U+17FF: Khmer</option>
    <option value="6144">U+1800 ... U+18AF: Mongolian</option>
    <option value="6320">U+18B0 ... U+18FF: Unified Canadian Aboriginal Syllabics Extended</option>
    <option value="6400">U+1900 ... U+194F: Limbu</option>
    <option value="6480">U+1950 ... U+197F: Tai Le</option>
    <option value="6528">U+1980 ... U+19DF: New Tai Lue</option>
    <option value="6624">U+19E0 ... U+19FF: Khmer Symbols</option>
    <option value="6656">U+1A00 ... U+1A1F: Buginese</option>
    <option value="6688">U+1A20 ... U+1AAF: Tai Tham</option>
    <option value="6832">U+1AB0 ... U+1AFF: Combining Diacritical Marks Extended</option>
    <option value="6912">U+1B00 ... U+1B7F: Balinese</option>
    <option value="7040">U+1B80 ... U+1BBF: Sundanese</option>
    <option value="7104">U+1BC0 ... U+1BFF: Batak</option>
    <option value="7168">U+1C00 ... U+1C4F: Lepcha</option>
    <option value="7248">U+1C50 ... U+1C7F: Ol Chiki</option>
    <option value="7360">U+1CC0 ... U+1CCF: Sundanese Supplement</option>
    <option value="7376">U+1CD0 ... U+1CFF: Vedic Extensions</option>
    <option value="7424">U+1D00 ... U+1D7F: Phonetic Extensions</option>
    <option value="7552">U+1D80 ... U+1DBF: Phonetic Extensions Supplement</option>
    <option value="7616">U+1DC0 ... U+1DFF: Combining Diacritical Marks Supplement</option>
    <option value="7680">U+1E00 ... U+1EFF: Latin Extended Additional</option>
    <option value="7936">U+1F00 ... U+1FFF: Greek Extended</option>
    <option value="8192">U+2000 ... U+206F: General Punctuation</option>
    <option value="8304">U+2070 ... U+209F: Superscripts and Subscripts</option>
    <option value="8352">U+20A0 ... U+20CF: Currency Symbols</option>
    <option value="8400">U+20D0 ... U+20FF: Combining Diacritical Marks for Symbols</option>
    <option value="8448">U+2100 ... U+214F: Letterlike Symbols</option>
    <option value="8528">U+2150 ... U+218F: Number Forms</option>
    <option value="8592">U+2190 ... U+21FF: Arrows</option>
    <option value="8704">U+2200 ... U+22FF: Mathematical Operators</option>
    <option value="8960">U+2300 ... U+23FF: Miscellaneous Technical</option>
    <option value="9216">U+2400 ... U+243F: Control Pictures</option>
    <option value="9280">U+2440 ... U+245F: Optical Character Recognition</option>
    <option value="9312">U+2460 ... U+24FF: Enclosed Alphanumerics</option>
    <option value="9472">U+2500 ... U+257F: Box Drawing</option>
    <option value="9600">U+2580 ... U+259F: Block Elements</option>
    <option value="9632">U+25A0 ... U+25FF: Geometric Shapes</option>
    <option value="9728">U+2600 ... U+26FF: Miscellaneous Symbols</option>
    <option value="9984">U+2700 ... U+27BF: Dingbats</option>
    <option value="10176">U+27C0 ... U+27EF: Miscellaneous Mathematical Symbols-A</option>
    <option value="10224">U+27F0 ... U+27FF: Supplemental Arrows-A</option>
    <option value="10240">U+2800 ... U+28FF: Braille Patterns</option>
    <option value="10496">U+2900 ... U+297F: Supplemental Arrows-B</option>
    <option value="10624">U+2980 ... U+29FF: Miscellaneous Mathematical Symbols-B</option>
    <option value="10752">U+2A00 ... U+2AFF: Supplemental Mathematical Operators</option>
    <option value="11008">U+2B00 ... U+2BFF: Miscellaneous Symbols and Arrows</option>
    <option value="11264">U+2C00 ... U+2C5F: Glagolitic</option>
    <option value="11360">U+2C60 ... U+2C7F: Latin Extended-C</option>
    <option value="11392">U+2C80 ... U+2CFF: Coptic</option>
    <option value="11520">U+2D00 ... U+2D2F: Georgian Supplement</option>
    <option value="11568">U+2D30 ... U+2D7F: Tifinagh</option>
    <option value="11648">U+2D80 ... U+2DDF: Ethiopic Extended</option>
    <option value="11744">U+2DE0 ... U+2DFF: Cyrillic Extended-A</option>
    <option value="11776">U+2E00 ... U+2E7F: Supplemental Punctuation</option>
    <option value="11904">U+2E80 ... U+2EFF: CJK Radicals Supplement</option>
    <option value="12032">U+2F00 ... U+2FDF: Kangxi Radicals</option>
    <option value="12272">U+2FF0 ... U+2FFF: Ideographic Description Characters</option>
    <option value="12288">U+3000 ... U+303F: CJK Symbols and Punctuation</option>
    <option value="12352">U+3040 ... U+309F: Hiragana</option>
    <option value="12448">U+30A0 ... U+30FF: Katakana</option>
    <option value="12544">U+3100 ... U+312F: Bopomofo</option>
    <option value="12592">U+3130 ... U+318F: Hangul Compatibility Jamo</option>
    <option value="12688">U+3190 ... U+319F: Kanbun</option>
    <option value="12704">U+31A0 ... U+31BF: Bopomofo Extended</option>
    <option value="12736">U+31C0 ... U+31EF: CJK Strokes</option>
    <option value="12784">U+31F0 ... U+31FF: Katakana Phonetic Extensions</option>
    <option value="12800">U+3200 ... U+32FF: Enclosed CJK Letters and Months</option>
    <option value="13056">U+3300 ... U+33FF: CJK Compatibility</option>
    <option value="13312">U+3400 ... U+4DBF: CJK Unified Ideographs Extension A</option>
    <option value="19904">U+4DC0 ... U+4DFF: Yijing Hexagram Symbols</option>
    <option value="19968">U+4E00 ... U+9FFF: CJK Unified Ideographs</option>
    <option value="40960">U+A000 ... U+A48F: Yi Syllables</option>
    <option value="42128">U+A490 ... U+A4CF: Yi Radicals</option>
    <option value="42192">U+A4D0 ... U+A4FF: Lisu</option>
    <option value="42240">U+A500 ... U+A63F: Vai</option>
    <option value="42560">U+A640 ... U+A69F: Cyrillic Extended-B</option>
    <option value="42656">U+A6A0 ... U+A6FF: Bamum</option>
    <option value="42752">U+A700 ... U+A71F: Modifier Tone Letters</option>
    <option value="42784">U+A720 ... U+A7FF: Latin Extended-D</option>
    <option value="43008">U+A800 ... U+A82F: Syloti Nagri</option>
    <option value="43056">U+A830 ... U+A83F: Common Indic Number Forms</option>
    <option value="43072">U+A840 ... U+A87F: Phags-pa</option>
    <option value="43136">U+A880 ... U+A8DF: Saurashtra</option>
    <option value="43232">U+A8E0 ... U+A8FF: Devanagari Extended</option>
    <option value="43264">U+A900 ... U+A92F: Kayah Li</option>
    <option value="43312">U+A930 ... U+A95F: Rejang</option>
    <option value="43360">U+A960 ... U+A97F: Hangul Jamo Extended-A</option>
    <option value="43392">U+A980 ... U+A9DF: Javanese</option>
    <option value="43488">U+A9E0 ... U+A9FF: Myanmar Extended-B</option>
    <option value="43520">U+AA00 ... U+AA5F: Cham</option>
    <option value="43616">U+AA60 ... U+AA7F: Myanmar Extended-A</option>
    <option value="43648">U+AA80 ... U+AADF: Tai Viet</option>
    <option value="43744">U+AAE0 ... U+AAFF: Meetei Mayek Extensions</option>
    <option value="43776">U+AB00 ... U+AB2F: Ethiopic Extended-A</option>
    <option value="43824">U+AB30 ... U+AB6F: Latin Extended-E</option>
    <option value="43888">U+AB70 ... U+ABBF: Cherokee Supplement</option>
    <option value="43968">U+ABC0 ... U+ABFF: Meetei Mayek</option>
    <option value="44032">U+AC00 ... U+D7AF: Hangul Syllables</option>
    <option value="55216">U+D7B0 ... U+D7FF: Hangul Jamo Extended-B</option>
    <option value="55296">U+D800 ... U+DB7F: High Surrogates</option>
    <option value="56192">U+DB80 ... U+DBFF: High Private Use Surrogates</option>
    <option value="56320">U+DC00 ... U+DFFF: Low Surrogates</option>
    <option value="57344">U+E000 ... U+F8FF: Private Use Area</option>
    <option value="63744">U+F900 ... U+FAFF: CJK Compatibility Ideographs</option>
    <option value="64256">U+FB00 ... U+FB4F: Alphabetic Presentation Forms</option>
    <option value="64336">U+FB50 ... U+FDFF: Arabic Presentation Forms-A</option>
    <option value="65024">U+FE00 ... U+FE0F: Variation Selectors</option>
    <option value="65040">U+FE10 ... U+FE1F: Vertical Forms</option>
    <option value="65056">U+FE20 ... U+FE2F: Combining Half Marks</option>
    <option value="65072">U+FE30 ... U+FE4F: CJK Compatibility Forms</option>
    <option value="65104">U+FE50 ... U+FE6F: Small Form Variants</option>
    <option value="65136">U+FE70 ... U+FEFF: Arabic Presentation Forms-B</option>
    <option value="65280">U+FF00 ... U+FFEF: Halfwidth and Fullwidth Forms</option>
    <option value="65520">U+FFF0 ... U+FFFF: Specials</option>
    <option value="65536">U+10000 ... U+1007F: Linear B Syllabary</option>
    <option value="65664">U+10080 ... U+100FF: Linear B Ideograms</option>
    <option value="65792">U+10100 ... U+1013F: Aegean Numbers</option>
    <option value="65856">U+10140 ... U+1018F: Ancient Greek Numbers</option>
    <option value="65936">U+10190 ... U+101CF: Ancient Symbols</option>
    <option value="66000">U+101D0 ... U+101FF: Phaistos Disc</option>
    <option value="66176">U+10280 ... U+1029F: Lycian</option>
    <option value="66208">U+102A0 ... U+102DF: Carian</option>
    <option value="66272">U+102E0 ... U+102FF: Coptic Epact Numbers</option>
    <option value="66304">U+10300 ... U+1032F: Old Italic</option>
    <option value="66352">U+10330 ... U+1034F: Gothic</option>
    <option value="66384">U+10350 ... U+1037F: Old Permic</option>
    <option value="66432">U+10380 ... U+1039F: Ugaritic</option>
    <option value="66464">U+103A0 ... U+103DF: Old Persian</option>
    <option value="66560">U+10400 ... U+1044F: Deseret</option>
    <option value="66640">U+10450 ... U+1047F: Shavian</option>
    <option value="66688">U+10480 ... U+104AF: Osmanya</option>
    <option value="66816">U+10500 ... U+1052F: Elbasan</option>
    <option value="66864">U+10530 ... U+1056F: Caucasian Albanian</option>
    <option value="67072">U+10600 ... U+1077F: Linear A</option>
    <option value="67584">U+10800 ... U+1083F: Cypriot Syllabary</option>
    <option value="67648">U+10840 ... U+1085F: Imperial Aramaic</option>
    <option value="67680">U+10860 ... U+1087F: Palmyrene</option>
    <option value="67712">U+10880 ... U+108AF: Nabataean</option>
    <option value="67808">U+108E0 ... U+108FF: Hatran</option>
    <option value="67840">U+10900 ... U+1091F: Phoenician</option>
    <option value="67872">U+10920 ... U+1093F: Lydian</option>
    <option value="67968">U+10980 ... U+1099F: Meroitic Hieroglyphs</option>
    <option value="68000">U+109A0 ... U+109FF: Meroitic Cursive</option>
    <option value="68096">U+10A00 ... U+10A5F: Kharoshthi</option>
    <option value="68192">U+10A60 ... U+10A7F: Old South Arabian</option>
    <option value="68224">U+10A80 ... U+10A9F: Old North Arabian</option>
    <option value="68288">U+10AC0 ... U+10AFF: Manichaean</option>
    <option value="68352">U+10B00 ... U+10B3F: Avestan</option>
    <option value="68416">U+10B40 ... U+10B5F: Inscriptional Parthian</option>
    <option value="68448">U+10B60 ... U+10B7F: Inscriptional Pahlavi</option>
    <option value="68480">U+10B80 ... U+10BAF: Psalter Pahlavi</option>
    <option value="68608">U+10C00 ... U+10C4F: Old Turkic</option>
    <option value="68736">U+10C80 ... U+10CFF: Old Hungarian</option>
    <option value="69216">U+10E60 ... U+10E7F: Rumi Numeral Symbols</option>
    <option value="69632">U+11000 ... U+1107F: Brahmi</option>
    <option value="69760">U+11080 ... U+110CF: Kaithi</option>
    <option value="69840">U+110D0 ... U+110FF: Sora Sompeng</option>
    <option value="69888">U+11100 ... U+1114F: Chakma</option>
    <option value="69968">U+11150 ... U+1117F: Mahajani</option>
    <option value="70016">U+11180 ... U+111DF: Sharada</option>
    <option value="70112">U+111E0 ... U+111FF: Sinhala Archaic Numbers</option>
    <option value="70144">U+11200 ... U+1124F: Khojki</option>
    <option value="70272">U+11280 ... U+112AF: Multani</option>
    <option value="70320">U+112B0 ... U+112FF: Khudawadi</option>
    <option value="70400">U+11300 ... U+1137F: Grantha</option>
    <option value="70784">U+11480 ... U+114DF: Tirhuta</option>
    <option value="71040">U+11580 ... U+115FF: Siddham</option>
    <option value="71168">U+11600 ... U+1165F: Modi</option>
    <option value="71296">U+11680 ... U+116CF: Takri</option>
    <option value="71424">U+11700 ... U+1173F: Ahom</option>
    <option value="71840">U+118A0 ... U+118FF: Warang Citi</option>
    <option value="72384">U+11AC0 ... U+11AFF: Pau Cin Hau</option>
    <option value="73728">U+12000 ... U+123FF: Cuneiform</option>
    <option value="74752">U+12400 ... U+1247F: Cuneiform Numbers and Punctuation</option>
    <option value="74880">U+12480 ... U+1254F: Early Dynastic Cuneiform</option>
    <option value="77824">U+13000 ... U+1342F: Egyptian Hieroglyphs</option>
    <option value="82944">U+14400 ... U+1467F: Anatolian Hieroglyphs</option>
    <option value="92160">U+16800 ... U+16A3F: Bamum Supplement</option>
    <option value="92736">U+16A40 ... U+16A6F: Mro</option>
    <option value="92880">U+16AD0 ... U+16AFF: Bassa Vah</option>
    <option value="92928">U+16B00 ... U+16B8F: Pahawh Hmong</option>
    <option value="93952">U+16F00 ... U+16F9F: Miao</option>
    <option value="110592">U+1B000 ... U+1B0FF: Kana Supplement</option>
    <option value="113664">U+1BC00 ... U+1BC9F: Duployan</option>
    <option value="113824">U+1BCA0 ... U+1BCAF: Shorthand Format Controls</option>
    <option value="118784">U+1D000 ... U+1D0FF: Byzantine Musical Symbols</option>
    <option value="119040">U+1D100 ... U+1D1FF: Musical Symbols</option>
    <option value="119296">U+1D200 ... U+1D24F: Ancient Greek Musical Notation</option>
    <option value="119552">U+1D300 ... U+1D35F: Tai Xuan Jing Symbols</option>
    <option value="119648">U+1D360 ... U+1D37F: Counting Rod Numerals</option>
    <option value="119808">U+1D400 ... U+1D7FF: Mathematical Alphanumeric Symbols</option>
    <option value="120832">U+1D800 ... U+1DAAF: Sutton SignWriting</option>
    <option value="124928">U+1E800 ... U+1E8DF: Mende Kikakui</option>
    <option value="126464">U+1EE00 ... U+1EEFF: Arabic Mathematical Alphabetic Symbols</option>
    <option value="126976">U+1F000 ... U+1F02F: Mahjong Tiles</option>
    <option value="127024">U+1F030 ... U+1F09F: Domino Tiles</option>
    <option value="127136">U+1F0A0 ... U+1F0FF: Playing Cards</option>
    <option value="127232">U+1F100 ... U+1F1FF: Enclosed Alphanumeric Supplement</option>
    <option value="127488">U+1F200 ... U+1F2FF: Enclosed Ideographic Supplement</option>
    <option value="127744">U+1F300 ... U+1F5FF: Miscellaneous Symbols and Pictographs</option>
    <option value="128512">U+1F600 ... U+1F64F: Emoticons</option>
    <option value="128592">U+1F650 ... U+1F67F: Ornamental Dingbats</option>
    <option value="128640">U+1F680 ... U+1F6FF: Transport and Map Symbols</option>
    <option value="128768">U+1F700 ... U+1F77F: Alchemical Symbols</option>
    <option value="128896">U+1F780 ... U+1F7FF: Geometric Shapes Extended</option>
    <option value="129024">U+1F800 ... U+1F8FF: Supplemental Arrows-C</option>
    <option value="129280">U+1F900 ... U+1F9FF: Supplemental Symbols and Pictographs</option>
    <option value="131072">U+20000 ... U+2A6DF: CJK Unified Ideographs Extension B</option>
    <option value="173824">U+2A700 ... U+2B73F: CJK Unified Ideographs Extension C</option>
    <option value="177984">U+2B740 ... U+2B81F: CJK Unified Ideographs Extension D</option>
    <option value="178208">U+2B820 ... U+2CEAF: CJK Unified Ideographs Extension E</option>
    <option value="194560">U+2F800 ... U+2FA1F: CJK Compatibility Ideographs Supplement</option>
    <option value="917504">U+E0000 ... U+E007F: Tags</option>
    <option value="917760">U+E0100 ... U+E01EF: Variation Selectors Supplement</option>
    <option value="983040">U+F0000 ... U+FFFFF: Supplementary Private Use Area-A</option>
    <option value="1048576">U+100000 ... U+10FFFF: Supplementary Private Use Area-B</option>
  </select>
  <select id="char" size="50" style="width: 100%">
  </select>
</div>

<div id="container">
  <div>U+<input id="code" type="text" value=""></div>
  <div id="preview"></div>
  <div id="bitmap"></div>
  <p> <input id="save" type="button" value="save">
      <input id="reset" type="button" value="reset">
  <p> <input id="string" type="text">
  <p> <canvas width="400" height="400">
</div>

<script src="jquery-1.11.3.js" type="text/javascript"></script>
<script src="unicode.js" type="text/javascript"></script>
<script type="text/javascript">
(function () {

var udesc = Unicode();
var w = 8;
var h = 10;

var M = 1000;
var C = 0;
var F;

$("#save").click(function () {
	localStorage.setItem('FONT', JSON.stringify(F));
});

$(window).bind('load', function () {
	var of;

	of = localStorage.getItem('FONT');
	if (of)
		F = JSON.parse(of);
	else
		F = new Array(M);
	$("#code").val("0061").change();
});

$('#page').change(function () {
	var b, i, d, e;

	b = +$('#page').val();
	$('#char').empty();
	for (i=0; i<256; i++) {
		d = udesc[b+i];
		if (!d || d === "")
			d = "???";
		e = $('<option value="' + (b+i) + '"></option>');
		e.text(d);
		$('#char').append(e);
	}
});

$('#char').change(function () {
	var n;

	n = +$('#char').val()
	$('#code').val(n.toString(16)).change();
});

var drawstr = function () {
	var s, x, y, fx, fy, a, ctx, canv, col, idat, dat;

	canv = $('canvas')[0];
	ctx = canv.getContext('2d');
	ctx.clearRect(0,0, 1000, 1000);
	idat = ctx.getImageData(0, 0, canv.width, canv.height);
	console.log(canv.width, canv.height);
	dat = idat.data;
	s = $('#string').val();
	y = 0;
	x = 0;
	for (c=0; c<s.length; c++) {
		a = F[s.charCodeAt(c)];
		for (fx=0; fx<w; fx++)
			for (fy=0; fy<h; fy++) {
				if (a && a[fy][fx])
					col = 0;
				else
					col = 255;
				dat[(fx+x + canv.width*(fy+y))*4] = col;
				dat[(fx+x + canv.width*(fy+y))*4 + 1] = col;
				dat[(fx+x + canv.width*(fy+y))*4 + 2] = col;
				dat[(fx+x + canv.width*(fy+y))*4 + 3] = 255;
			}
		x += w;
	}
	ctx.putImageData(idat, 0, 0);
};

var update = function (e, swap) {
	var e, x, y, b;

	x = e.data("x");
	y = e.data("y");
	e.removeClass("set");
	e.removeClass("unset");
	b = F[C][y][x];
	if (swap) {
		b = !b;
		F[C][y][x] = b;
	}
	if (b)
		e.addClass("set");
	else
		e.addClass("unset");
	if (swap)
		drawstr();
};

$("#code").change(function () {
	var x, y;

	C = parseInt("0x" + $(this).val());
	if (!F[C]) {
		F[C] = new Array(h);
		for (y=0; y<h; y++) {
			F[C][y] = new Array(w);
			for (x=0; x<w; x++)
				F[C][y][x] = 0;
		}
	}
	$("#preview").text(String.fromCharCode(C));
	$(".box").each(function () {
		update($(this), false);
	});
});

$("#string").change(drawstr);

var c = $("#bitmap");
for (y=0; y<h; y++) {
	var r = $('<div class="row"></div>');
	c.append(r);
	r.append($('<div class="num">' + (y+1) + '</div>'));
	for (x=0; x<w; x++) {
		var e = $('<div class="box unset"></div>');
		e.data("x", x);
		e.data("y", y);
		e.click(function (ev) {
			update($(ev.target), true);
		});
		r.append(e);
	}
}
})();
</script>
